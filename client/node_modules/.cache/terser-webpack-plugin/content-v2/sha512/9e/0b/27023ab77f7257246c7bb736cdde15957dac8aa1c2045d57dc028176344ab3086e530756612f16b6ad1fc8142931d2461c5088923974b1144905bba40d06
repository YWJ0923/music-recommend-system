{"code":"(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[12],{334:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"default\",(function(){return x}));var a=n(34),i=n(0),r=n(38),u=n.n(r),s=n(59),c=n(50),d=n(338),o=n(49),l=n(39),h=n(93),b=n(133),m=n(26),p=n.n(m),f=n(4),j=[{key:\"index\",render:function(t,e,n){return n+1},width:\"50px\"},{dataIndex:\"musicName\",key:\"musicName\",title:\"\\u6b4c\\u66f2\",ellipsis:!0,render:function(t,e,n){return Object(f.jsx)(c.a,{type:\"link\",onClick:function(){h.a.addMusic(e)},style:{padding:\"0\"},children:t})},width:\"300px\"},{dataIndex:\"artistName\",key:\"artistName\",title:\"\\u6b4c\\u624b\",ellipsis:!0,render:function(t,e,n){return Object(f.jsx)(s.b,{to:\"/artist/\".concat(e.artistId),children:t})},width:\"150px\"},{dataIndex:\"albumName\",key:\"albumName\",title:\"\\u4e13\\u8f91\",ellipsis:!0,render:function(t,e,n){return Object(f.jsx)(s.b,{to:\"/album/\".concat(e.albumId),children:t})},width:\"150px\"},{dataIndex:\"userPlayTimes\",key:\"userPlayTimes\",title:\"\\u64ad\\u653e\\u6b21\\u6570\",render:function(t){return t+\"\\u6b21\"},width:\"100px\"}];function x(t){var e=Object(i.useState)([]),n=Object(a.a)(e,2),r=n[0],s=n[1];return Object(i.useEffect)((function(){u()({method:\"GET\",url:l.b+\"user/music_ranking\",headers:{Authorization:Object(o.a)()}}).then((function(e){401===e.data.status?(p.a.publish(\"logout\"),t.history.push(\"/\"),Object(b.a)(\"\\u8bf7\\u5148\\u767b\\u5f55\")):200===e.data.status?s(e.data.data):t.history.push(\"/error\")}))}),[]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(d.a,{dataSource:r,columns:j,title:function(){return\"\\u542c\\u6b4c\\u6392\\u884c\"},rowKey:function(t){return t.musicId},pagination:!1})})}}}]);","name":"static/js/12.07893266.chunk.js","map":{"version":3,"sources":["static/js/12.07893266.chunk.js"],"names":["this","push","334","module","__webpack_exports__","__webpack_require__","r","d","Ranking","D_Programming_Project_Music_Recommend_System_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","axios__WEBPACK_IMPORTED_MODULE_2__","axios__WEBPACK_IMPORTED_MODULE_2___default","n","react_router_dom__WEBPACK_IMPORTED_MODULE_3__","antd__WEBPACK_IMPORTED_MODULE_4__","antd__WEBPACK_IMPORTED_MODULE_5__","_utils_auth__WEBPACK_IMPORTED_MODULE_6__","_utils_constant__WEBPACK_IMPORTED_MODULE_7__","_stores_playBarStore__WEBPACK_IMPORTED_MODULE_8__","_utils_common__WEBPACK_IMPORTED_MODULE_9__","pubsub_js__WEBPACK_IMPORTED_MODULE_10__","pubsub_js__WEBPACK_IMPORTED_MODULE_10___default","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__","colomns","key","render","text","record","index","width","dataIndex","title","ellipsis","Object","type","onClick","addMusic","style","padding","children","to","concat","artistId","albumId","props","_useState","_useState2","ranking","setRanking","method","url","headers","Authorization","then","response","data","status","a","publish","history","dataSource","columns","rowKey","musicId","pagination"],"mappings":"CAACA,KAAwB,kBAAIA,KAAwB,mBAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAEnEC,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACSC,EAAoBE,EAAEH,EAAqB,WAAW,WAAa,OAAOI,KACpF,IAAIC,EAA4KJ,EAAoB,IAChMK,EAAqCL,EAAoB,GAEzDM,EAAqCN,EAAoB,IACzDO,EAA0DP,EAAoBQ,EAAEF,GAChFG,EAAgDT,EAAoB,IACpEU,EAAoCV,EAAoB,IACxDW,EAAoCX,EAAoB,KACxDY,EAA2CZ,EAAoB,IAC/Da,EAA+Cb,EAAoB,IACnEc,EAAoDd,EAAoB,IACxEe,EAA6Cf,EAAoB,KACjEgB,EAA0ChB,EAAoB,IAC9DiB,EAA+DjB,EAAoBQ,EAAEQ,GACrFE,EAAkDlB,EAAoB,GAE3FmB,EAAQ,CAAC,CAACC,IAAI,QAAQC,OAAO,SAAgBC,EAAKC,EAAOC,GAAO,OAAOA,EAAM,GAAIC,MAAM,QAAQ,CAACC,UAAU,YAAYN,IAAI,YAAYO,MAAM,eAAKC,UAAS,EAAKP,OAAO,SAAgBC,EAAKC,EAAOC,GAAO,OAAmBK,OAAOX,EAAqD,IAA5DW,CAA+DnB,EAAmD,EAAE,CAACoB,KAAK,OAAOC,QAAQ,WAAmBjB,EAAwE,EAAEkB,SAAST,IAAUU,MAAM,CAACC,QAAQ,KAAKC,SAASb,KAASG,MAAM,SAAS,CAACC,UAAU,aAAaN,IAAI,aAAaO,MAAM,eAAKC,UAAS,EAAKP,OAAO,SAAgBC,EAAKC,EAAOC,GAAO,OAAmBK,OAAOX,EAAqD,IAA5DW,CAA+DpB,EAA4D,EAAE,CAAC2B,GAAG,WAAWC,OAAOd,EAAOe,UAAUH,SAASb,KAASG,MAAM,SAAS,CAACC,UAAU,YAAYN,IAAI,YAAYO,MAAM,eAAKC,UAAS,EAAKP,OAAO,SAAgBC,EAAKC,EAAOC,GAAO,OAAmBK,OAAOX,EAAqD,IAA5DW,CAA+DpB,EAA4D,EAAE,CAAC2B,GAAG,UAAUC,OAAOd,EAAOgB,SAASJ,SAASb,KAASG,MAAM,SAAS,CAACC,UAAU,gBAAgBN,IAAI,gBAAgBO,MAAM,2BAAON,OAAO,SAAgBC,GAAM,OAAOA,EAAK,UAAMG,MAAM,UAAU,SAAStB,EAAQqC,GAAO,IAAIC,EAAUZ,OAAOxB,EAA6C,SAApDwB,CAAuD,IAAIa,EAAWb,OAAOzB,EAA2L,EAAlMyB,CAAqMY,EAAU,GAAGE,EAAQD,EAAW,GAAGE,EAAWF,EAAW,GACjnD,OADonDb,OAAOxB,EAA8C,UAArDwB,EAAwD,WAAWtB,GAAAA,CAA6C,CAACsC,OAAO,MAAMC,IAAIjC,EAAiE,EAAE,qBAAqBkC,QAAQ,CAACC,cAAcnB,OAAOjB,EAA2D,EAAlEiB,MAA0EoB,MAAK,SAASC,GAAoC,MAAvBA,EAASC,KAAKC,QAAcnC,EAAgDoC,EAAEC,QAAQ,UAAUd,EAAMe,QAAQ3D,KAAK,KAAKiC,OAAOd,EAAqE,EAA5Ec,CAA+E,6BAAwC,MAAvBqB,EAASC,KAAKC,OAAcR,EAAWM,EAASC,KAAKA,MAAYX,EAAMe,QAAQ3D,KAAK,eAC1vE,IAAuBiC,OAAOX,EAAqD,IAA5DW,CAA+DX,EAA0D,SAAE,CAACiB,SAAsBN,OAAOX,EAAqD,IAA5DW,CAA+DlB,EAAmD,EAAE,CAAC6C,WAAWb,EAAQc,QAAQtC,EAAQQ,MAAM,WAAiB,MAAM,4BAAS+B,OAAO,SAAgBnC,GAAQ,OAAOA,EAAOoC,SAAUC,YAAW"},"input":"(this[\"webpackJsonpfront\"] = this[\"webpackJsonpfront\"] || []).push([[12],{\n\n/***/ 334:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Ranking; });\n/* harmony import */ var D_Programming_Project_Music_Recommend_System_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(34);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(38);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(50);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(338);\n/* harmony import */ var _utils_auth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(49);\n/* harmony import */ var _utils_constant__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(39);\n/* harmony import */ var _stores_playBarStore__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(93);\n/* harmony import */ var _utils_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(133);\n/* harmony import */ var pubsub_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(26);\n/* harmony import */ var pubsub_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(pubsub_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(4);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__);\nvar colomns=[{key:'index',render:function render(text,record,index){return index+1;},width:'50px'},{dataIndex:'musicName',key:'musicName',title:'歌曲',ellipsis:true,render:function render(text,record,index){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"],{type:\"link\",onClick:function onClick(){_stores_playBarStore__WEBPACK_IMPORTED_MODULE_8__[/* playBarStore */ \"a\"].addMusic(record);},style:{padding:'0'},children:text});},width:'300px'},{dataIndex:'artistName',key:'artistName',title:'歌手',ellipsis:true,render:function render(text,record,index){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(react_router_dom__WEBPACK_IMPORTED_MODULE_3__[/* Link */ \"b\"],{to:\"/artist/\".concat(record.artistId),children:text});},width:'150px'},{dataIndex:'albumName',key:'albumName',title:'专辑',ellipsis:true,render:function render(text,record,index){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(react_router_dom__WEBPACK_IMPORTED_MODULE_3__[/* Link */ \"b\"],{to:\"/album/\".concat(record.albumId),children:text});},width:'150px'},{dataIndex:'userPlayTimes',key:'userPlayTimes',title:'播放次数',render:function render(text){return text+'次';},width:'100px'}];function Ranking(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])([]),_useState2=Object(D_Programming_Project_Music_Recommend_System_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(_useState,2),ranking=_useState2[0],setRanking=_useState2[1];Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function(){axios__WEBPACK_IMPORTED_MODULE_2___default()({method:'GET',url:_utils_constant__WEBPACK_IMPORTED_MODULE_7__[/* SERVER_URL */ \"b\"]+'user/music_ranking',headers:{Authorization:Object(_utils_auth__WEBPACK_IMPORTED_MODULE_6__[/* getToken */ \"a\"])()}}).then(function(response){if(response.data.status===401){pubsub_js__WEBPACK_IMPORTED_MODULE_10___default.a.publish('logout');props.history.push('/');Object(_utils_common__WEBPACK_IMPORTED_MODULE_9__[/* showNotification */ \"a\"])('请先登录');}else if(response.data.status===200){setRanking(response.data.data);}else{props.history.push('/error');}});// eslint-disable-next-line\n},[]);return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"Fragment\"],{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"],{dataSource:ranking,columns:colomns,title:function title(){return'听歌排行';},rowKey:function rowKey(record){return record.musicId;},pagination:false})});}\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["D:/Programming/Project/Music_Recommend_System/client/src/pages/MyMusic/Ranking/index.jsx"],"names":["colomns","key","render","text","record","index","width","dataIndex","title","ellipsis","playBarStore","addMusic","padding","artistId","albumId","Ranking","props","useState","ranking","setRanking","useEffect","axios","method","url","SERVER_URL","headers","Authorization","getToken","then","response","data","status","PubSub","publish","history","push","showNotification","musicId"],"mappings":"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","file":"x","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from 'axios';\r\nimport {Link} from 'react-router-dom';\r\nimport {Button, Table} from 'antd';\r\nimport { getToken } from '../../../utils/auth';\r\nimport { SERVER_URL } from '../../../utils/constant';\r\nimport {playBarStore} from \"../../../stores/playBarStore\";\r\nimport {showNotification} from \"../../../utils/common\";\r\nimport PubSub from \"pubsub-js\";\r\n\r\nconst colomns = [\r\n    {\r\n        key: 'index',\r\n        render: (text, record, index) => {\r\n            return index + 1;\r\n        },\r\n        width: '50px'\r\n    },\r\n    {\r\n        dataIndex: 'musicName',\r\n        key: 'musicName',\r\n        title: '歌曲',\r\n        ellipsis: true,\r\n        render: (text, record, index) => {\r\n            return (<Button type=\"link\" onClick={() => {\r\n                playBarStore.addMusic(record);\r\n            }} style={{padding: '0'}}>{text}</Button>);\r\n        },\r\n        width: '300px'\r\n    },\r\n    {\r\n        dataIndex: 'artistName',\r\n        key: 'artistName',\r\n        title: '歌手',\r\n        ellipsis: true,\r\n        render: (text, record, index) => {\r\n            return (<Link to={`/artist/${record.artistId}`}>{text}</Link>);\r\n        },\r\n        width: '150px'\r\n    },\r\n    {\r\n        dataIndex: 'albumName',\r\n        key: 'albumName',\r\n        title: '专辑',\r\n        ellipsis: true,\r\n        render: (text, record, index) => {\r\n            return (<Link to={`/album/${record.albumId}`}>{text}</Link>);\r\n        },\r\n        width: '150px'\r\n    },\r\n    {\r\n        dataIndex: 'userPlayTimes',\r\n        key: 'userPlayTimes',\r\n        title: '播放次数',\r\n        render: (text) => {\r\n            return text + '次';\r\n        },\r\n        width: '100px'\r\n    }\r\n]\r\n\r\nexport default function Ranking(props) {\r\n    const [ranking, setRanking] = useState([]);\r\n    \r\n    useEffect(() => {\r\n        axios({\r\n            method: 'GET',\r\n            url: SERVER_URL + 'user/music_ranking',\r\n            headers: {\r\n                Authorization: getToken()\r\n            }\r\n        }).then((response) => {\r\n            if (response.data.status === 401) {\r\n                PubSub.publish('logout');\r\n                props.history.push('/');\r\n                showNotification('请先登录');\r\n            } else if (response.data.status === 200) {\r\n                setRanking(response.data.data);\r\n            } else {\r\n                props.history.push('/error');\r\n            }\r\n        });\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <>\r\n            <Table dataSource={ranking} columns={colomns} title={() => '听歌排行'} rowKey={record => record.musicId} pagination={false} />\r\n        </>\r\n    );\r\n}\r\n"]}}