{"code":"(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[14],{333:function(e,t,i){\"use strict\";i.r(t),i.d(t,\"default\",(function(){return f}));var n=i(34),s=i(0),c=i(288),l=i(284),o=i(293),a=i(38),h=i.n(a),r=i(26),d=i.n(r),u=i(300),j=i(177),b=i(49),x=i(39),p=i(133),m=i(4),g=c.a.Content,O=c.a.Sider,y=l.a.SubMenu;function f(e){var t=Object(s.useState)([]),i=Object(n.a)(t,2),a=i[0],r=i[1];Object(s.useEffect)((function(){return d.a.subscribe(\"getCollectionList\",f),f(),function(){d.a.unsubscribe(\"getCollectionList\")}}),[]);var f=function(){h()({method:\"GET\",url:x.b+\"collection_list\",headers:{Authorization:Object(b.a)()}}).then((function(t){401===t.data.status?(d.a.publish(\"logout\"),e.history.push(\"/\"),Object(p.a)(\"\\u8bf7\\u5148\\u767b\\u5f55\")):200===t.data.status?r(t.data.data):e.history.push(\"/error\")}))};return Object(m.jsxs)(c.a,{style:{minHeight:\"100vh\"},children:[Object(m.jsx)(O,{children:Object(m.jsxs)(l.a,{mode:\"inline\",defaultSelectedKeys:\"ranking\",style:{height:\"100%\"},onClick:function(t){\"recommend\"===t.key?e.history.push(\"/my_music/recommend\"):\"newList\"===t.key?(d.a.publish(\"showNewCollectionListModal\"),f()):\"ranking\"===t.key?e.history.push(\"/my_music/ranking\"):e.history.push(\"/my_music/collection_list/\"+t.key)},defaultOpenKeys:[\"collection_list\"],children:[Object(m.jsx)(l.a.Item,{children:\"\\u542c\\u6b4c\\u6392\\u884c\"},\"ranking\"),Object(m.jsx)(l.a.Item,{children:\"\\u6bcf\\u65e5\\u63a8\\u8350\"},\"recommend\"),Object(m.jsxs)(y,{title:\"\\u6211\\u7684\\u6b4c\\u5355\",children:[Object(m.jsx)(l.a.Item,{icon:Object(m.jsx)(u.a,{}),children:\"\\u521b\\u5efa\\u65b0\\u6b4c\\u5355\"},\"newList\"),Object(m.jsx)(l.a.Divider,{}),a.map((function(e){return Object(m.jsx)(l.a.Item,{style:{paddingLeft:\"10px\",height:\"50px\"},children:Object(m.jsxs)(\"div\",{style:{height:\"40px\",display:\"flex\"},children:[Object(m.jsx)(\"img\",{alt:e.collectionListName,src:e.collectionListImg,style:{width:\"40px\",height:\"40px\",marginRight:\"10px\"}}),Object(m.jsxs)(\"div\",{style:{height:\"40px\"},children:[Object(m.jsx)(\"div\",{style:{height:\"20px\",lineHeight:\"15px\",fontSize:\"15px\"},children:e.collectionListName}),Object(m.jsxs)(\"div\",{style:{height:\"20px\",lineHeight:\"21px\",fontSize:\"13px\",color:\"#999\"},children:[e.collectionListLength,\"\\u9996\"]})]})]})},e.collectionListId)}))]},\"collection_list\")]})}),Object(m.jsx)(g,{style:{padding:\"0\",minHeight:280},children:Object(m.jsx)(s.Suspense,{fallback:Object(m.jsx)(o.a,{}),children:Object(j.a)(e.route.routes)})})]})}}}]);","name":"static/js/14.8a4e42c5.chunk.js","map":{"version":3,"sources":["static/js/14.8a4e42c5.chunk.js"],"names":["this","push","333","module","__webpack_exports__","__webpack_require__","r","d","MyMusic","D_Programming_Project_Music_Recommend_System_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","antd__WEBPACK_IMPORTED_MODULE_2__","antd__WEBPACK_IMPORTED_MODULE_3__","antd__WEBPACK_IMPORTED_MODULE_4__","axios__WEBPACK_IMPORTED_MODULE_5__","axios__WEBPACK_IMPORTED_MODULE_5___default","n","pubsub_js__WEBPACK_IMPORTED_MODULE_6__","pubsub_js__WEBPACK_IMPORTED_MODULE_6___default","_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__","react_router_config__WEBPACK_IMPORTED_MODULE_8__","_utils_auth__WEBPACK_IMPORTED_MODULE_9__","_utils_constant__WEBPACK_IMPORTED_MODULE_10__","_utils_common__WEBPACK_IMPORTED_MODULE_11__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__","Content","Sider","SubMenu","props","_useState","Object","_useState2","collectionLists","setCollectionLists","a","subscribe","getCollectionList","unsubscribe","method","url","headers","Authorization","then","response","data","status","publish","history","style","minHeight","children","mode","defaultSelectedKeys","height","onClick","obj","key","defaultOpenKeys","Item","title","icon","Divider","map","list","paddingLeft","display","alt","collectionListName","src","collectionListImg","width","marginRight","lineHeight","fontSize","color","collectionListLength","collectionListId","padding","fallback","route","routes"],"mappings":"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"},"input":"(this[\"webpackJsonpfront\"] = this[\"webpackJsonpfront\"] || []).push([[14],{\n\n/***/ 333:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MyMusic; });\n/* harmony import */ var D_Programming_Project_Music_Recommend_System_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(34);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(288);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(284);\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(293);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(38);\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var pubsub_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(26);\n/* harmony import */ var pubsub_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(pubsub_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(300);\n/* harmony import */ var react_router_config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(177);\n/* harmony import */ var _utils_auth__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(49);\n/* harmony import */ var _utils_constant__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(39);\n/* harmony import */ var _utils_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(133);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(4);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__);\nvar Content=antd__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].Content,Sider=antd__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"].Sider;var SubMenu=antd__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].SubMenu;function MyMusic(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])([]),_useState2=Object(D_Programming_Project_Music_Recommend_System_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(_useState,2),collectionLists=_useState2[0],setCollectionLists=_useState2[1];Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function(){pubsub_js__WEBPACK_IMPORTED_MODULE_6___default.a.subscribe('getCollectionList',getCollectionList);getCollectionList();return function(){pubsub_js__WEBPACK_IMPORTED_MODULE_6___default.a.unsubscribe('getCollectionList');};// eslint-disable-next-line\n},[]);var handleClick=function handleClick(obj){if(obj.key==='recommend'){props.history.push('/my_music/recommend');}else if(obj.key==='newList'){pubsub_js__WEBPACK_IMPORTED_MODULE_6___default.a.publish('showNewCollectionListModal');getCollectionList();}else if(obj.key==='ranking'){props.history.push('/my_music/ranking');}else{props.history.push('/my_music/collection_list/'+obj.key);}};var getCollectionList=function getCollectionList(){axios__WEBPACK_IMPORTED_MODULE_5___default()({method:'GET',url:_utils_constant__WEBPACK_IMPORTED_MODULE_10__[/* SERVER_URL */ \"b\"]+'collection_list',headers:{Authorization:Object(_utils_auth__WEBPACK_IMPORTED_MODULE_9__[/* getToken */ \"a\"])()}}).then(function(response){if(response.data.status===401){pubsub_js__WEBPACK_IMPORTED_MODULE_6___default.a.publish('logout');props.history.push('/');Object(_utils_common__WEBPACK_IMPORTED_MODULE_11__[/* showNotification */ \"a\"])('请先登录');}else if(response.data.status===200){setCollectionLists(response.data.data);}else{props.history.push('/error');}});};return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsxs\"])(antd__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"],{style:{minHeight:'100vh'},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(Sider,{children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsxs\"])(antd__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"],{mode:\"inline\",defaultSelectedKeys:\"ranking\",style:{height:'100%'},onClick:handleClick,defaultOpenKeys:['collection_list'],children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].Item,{children:\"\\u542C\\u6B4C\\u6392\\u884C\"},\"ranking\"),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].Item,{children:\"\\u6BCF\\u65E5\\u63A8\\u8350\"},\"recommend\"),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsxs\"])(SubMenu,{title:\"\\u6211\\u7684\\u6B4C\\u5355\",children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].Item,{icon:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(_ant_design_icons__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"],{}),children:\"\\u521B\\u5EFA\\u65B0\\u6B4C\\u5355\"},\"newList\"),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].Divider,{}),collectionLists.map(function(list){return/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"].Item,{style:{paddingLeft:'10px',height:'50px'},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsxs\"])(\"div\",{style:{height:'40px',display:'flex'},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(\"img\",{alt:list.collectionListName,src:list.collectionListImg,style:{width:'40px',height:'40px',marginRight:'10px'}}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsxs\"])(\"div\",{style:{height:'40px'},children:[/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(\"div\",{style:{height:'20px',lineHeight:'15px',fontSize:'15px'},children:list.collectionListName}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsxs\"])(\"div\",{style:{height:'20px',lineHeight:'21px',fontSize:'13px',color:'#999'},children:[list.collectionListLength,\"\\u9996\"]})]})]})},list.collectionListId);})]},\"collection_list\")]})}),/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(Content,{style:{padding:'0',minHeight:280},children:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(react__WEBPACK_IMPORTED_MODULE_1__[\"Suspense\"],{fallback:/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"],{}),children:Object(react_router_config__WEBPACK_IMPORTED_MODULE_8__[/* renderRoutes */ \"a\"])(props.route.routes)})})]});}\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["D:/Programming/Project/Music_Recommend_System/client/src/pages/MyMusic/index.jsx"],"names":["Content","Layout","Sider","SubMenu","Menu","MyMusic","props","useState","collectionLists","setCollectionLists","useEffect","PubSub","subscribe","getCollectionList","unsubscribe","handleClick","obj","key","history","push","publish","axios","method","url","SERVER_URL","headers","Authorization","getToken","then","response","data","status","showNotification","minHeight","height","map","list","paddingLeft","display","collectionListName","collectionListImg","width","marginRight","lineHeight","fontSize","color","collectionListLength","collectionListId","padding","renderRoutes","route","routes"],"mappings":"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","file":"x","sourcesContent":["import React, { Suspense, useEffect, useState } from 'react'\r\nimport { Layout, Menu, Skeleton } from 'antd'\r\nimport axios from 'axios';\r\nimport PubSub from 'pubsub-js';\r\nimport {PlusCircleOutlined} from '@ant-design/icons';\r\nimport {renderRoutes} from 'react-router-config';\r\nimport { getToken } from '../../utils/auth';\r\nimport { SERVER_URL } from '../../utils/constant';\r\nimport {showNotification} from \"../../utils/common\";\r\n\r\nconst { Content, Sider } = Layout;\r\nconst {SubMenu} = Menu;\r\n\r\nexport default function MyMusic(props) {\r\n    const [collectionLists, setCollectionLists] = useState([]);\r\n\r\n    useEffect(() => {\r\n        PubSub.subscribe('getCollectionList', getCollectionList);\r\n        getCollectionList();  \r\n        return () => {\r\n            PubSub.unsubscribe('getCollectionList');\r\n        }  // eslint-disable-next-line\r\n    }, []);\r\n\r\n    const handleClick = (obj) => {\r\n        if (obj.key === 'recommend') {\r\n            props.history.push('/my_music/recommend');\r\n        } else if (obj.key === 'newList') {\r\n            PubSub.publish('showNewCollectionListModal');\r\n            getCollectionList();\r\n        } else if (obj.key === 'ranking') {\r\n            props.history.push('/my_music/ranking');\r\n        } else {\r\n            props.history.push('/my_music/collection_list/' + obj.key);\r\n        }\r\n    }\r\n\r\n    const getCollectionList = () => {\r\n        axios({\r\n            method: 'GET',\r\n            url: SERVER_URL + 'collection_list',\r\n            headers: {\r\n                Authorization: getToken()\r\n            }\r\n        }).then((response) => {\r\n            if (response.data.status === 401) {\r\n                PubSub.publish('logout');\r\n                props.history.push('/');\r\n                showNotification('请先登录');\r\n            } else if (response.data.status === 200) {\r\n                setCollectionLists(response.data.data);\r\n            } else {\r\n                props.history.push('/error');\r\n            }\r\n        });\r\n    }\r\n\r\n    return (\r\n        <Layout style={{minHeight: '100vh'}}>\r\n            <Sider>\r\n                <Menu mode=\"inline\" defaultSelectedKeys=\"ranking\" style={{height: '100%'}} onClick={handleClick} defaultOpenKeys={['collection_list']}>\r\n                    <Menu.Item key=\"ranking\">听歌排行</Menu.Item>\r\n                    <Menu.Item key=\"recommend\">每日推荐</Menu.Item>\r\n                    <SubMenu key=\"collection_list\" title=\"我的歌单\">\r\n                        <Menu.Item key=\"newList\" icon={<PlusCircleOutlined />}>创建新歌单</Menu.Item>\r\n                        <Menu.Divider />\r\n                        {collectionLists.map((list) => {\r\n                            return (\r\n                                <Menu.Item key={list.collectionListId} style={{paddingLeft: '10px', height: '50px'}}>\r\n                                    <div style={{height: '40px', display: 'flex'}}>\r\n                                        <img alt={list.collectionListName} src={list.collectionListImg} style={{width: '40px', height: '40px', marginRight: '10px'}} />\r\n                                        <div style={{height: '40px'}}>\r\n                                            <div style={{height: '20px', lineHeight: '15px', fontSize: '15px'}}>{list.collectionListName}</div>\r\n                                            <div style={{height: '20px', lineHeight: '21px', fontSize: '13px', color: '#999'}}>{list.collectionListLength}首</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </Menu.Item>\r\n                            );\r\n                        })}\r\n                    </SubMenu>\r\n                </Menu>\r\n            </Sider>\r\n            <Content style={{ padding: '0', minHeight: 280}}>\r\n                <Suspense fallback={<Skeleton />}>{renderRoutes(props.route.routes)}</Suspense>\r\n            </Content>\r\n        </Layout>\r\n    );\r\n}"]}}