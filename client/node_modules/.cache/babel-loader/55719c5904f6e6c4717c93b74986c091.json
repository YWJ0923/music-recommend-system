{"ast":null,"code":"import _slicedToArray from\"D:/Programming/Project/Music_Recommend_System/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Layout,Menu,Row,Col,Card}from'antd';import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import axios from'axios';import{SERVER_URL}from'../../utils/constant';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Content=Layout.Content,Sider=Layout.Sider;var SubMenu=Menu.SubMenu;var Meta=Card.Meta;export default function ArtistList(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState('artist_location=hot'),_useState4=_slicedToArray(_useState3,2),selectedKeys=_useState4[0],setSelectedKeys=_useState4[1];useEffect(function(){// const {artistLocation, artistType} = props.match.params;\nvar params=new URLSearchParams(props.location.search);var artistLocation=params.get('artist_location');var artistType=params.get('artist_type');if(artistLocation==='hot'){axios({method:'GET',url:SERVER_URL+'artistList',params:{artistLocation:artistLocation}}).then(function(response){if(response.data.status===200){setData(response.data.data);setSelectedKeys('artist_location=hot');}else{props.history.push('/error');}});}else{axios({method:'GET',url:SERVER_URL+'artistList',params:{artistLocation:artistLocation,artistType:artistType}}).then(function(response){if(response.data.status===200){setData(response.data.data);setSelectedKeys(\"artist_location=\".concat(artistLocation,\"&artist_type=\").concat(artistType));}else{props.history.push('/error');}});}},[props]);var handleClick=function handleClick(obj){props.history.push(\"/artist_list?\".concat(obj.key));};return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsx(Sider,{style:{width:250},children:/*#__PURE__*/_jsxs(Menu,{mode:\"inline\",style:{height:'100%'},onClick:handleClick,defaultOpenKeys:['0','1','2'],selectedKeys:selectedKeys,children:[/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u70ED\\u95E8\\u6B4C\\u624B\"},\"artist_location=hot\"),/*#__PURE__*/_jsxs(SubMenu,{title:\"\\u534E\\u8BED\",children:[/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u534E\\u8BED\\u7537\\u6B4C\\u624B\"},\"artist_location=0&artist_type=0\"),/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u534E\\u8BED\\u5973\\u6B4C\\u624B\"},\"artist_location=0&artist_type=1\"),/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u534E\\u8BED\\u7EC4\\u5408/\\u4E50\\u961F\"},\"artist_location=0&artist_type=2\")]},\"0\"),/*#__PURE__*/_jsxs(SubMenu,{title:\"\\u6B27\\u7F8E\",children:[/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u6B27\\u7F8E\\u7537\\u6B4C\\u624B\"},\"artist_location=1&artist_type=0\"),/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u6B27\\u7F8E\\u5973\\u6B4C\\u624B\"},\"artist_location=1&artist_type=1\"),/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u6B27\\u7F8E\\u7EC4\\u5408/\\u4E50\\u961F\"},\"artist_location=1&artist_type=2\")]},\"1\"),/*#__PURE__*/_jsxs(SubMenu,{title:\"\\u65E5\\u97E9\",children:[/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u65E5\\u97E9\\u7537\\u6B4C\\u624B\"},\"artist_location=2&artist_type=0\"),/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u65E5\\u97E9\\u5973\\u6B4C\\u624B\"},\"artist_location=2&artist_type=1\"),/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u65E5\\u97E9\\u7EC4\\u5408/\\u4E50\\u961F\"},\"artist_location=2&artist_type=2\")]},\"2\")]})}),/*#__PURE__*/_jsx(Content,{style:{paddingLeft:'10px',minHeight:280},children:/*#__PURE__*/_jsx(Row,{gutter:[10,5],children:data.map(function(artist,index){return/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Link,{to:\"/artist/\".concat(artist.artistId),children:/*#__PURE__*/_jsx(Card,{hoverable:true,cover:/*#__PURE__*/_jsx(\"img\",{alt:artist.artistName,src:artist.artistImg}),children:/*#__PURE__*/_jsx(Meta,{title:artist.artistName,style:{textAlign:'center'}})})})},index);})})})]});}","map":{"version":3,"sources":["D:/Programming/Project/Music_Recommend_System/client/src/pages/ArtistList/index.jsx"],"names":["Layout","Menu","Row","Col","Card","React","useState","useEffect","Link","axios","SERVER_URL","Content","Sider","SubMenu","Meta","ArtistList","props","data","setData","selectedKeys","setSelectedKeys","params","URLSearchParams","location","search","artistLocation","get","artistType","method","url","then","response","status","history","push","handleClick","obj","key","width","height","paddingLeft","minHeight","map","artist","index","artistId","artistName","artistImg","textAlign"],"mappings":"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","sourcesContent":["import { Layout, Menu, Row, Col, Card } from 'antd'\r\nimport React, { useState, useEffect } from 'react';\r\nimport {Link} from 'react-router-dom'\r\nimport axios from 'axios';\r\nimport { SERVER_URL } from '../../utils/constant';\r\n\r\nconst { Content, Sider } = Layout;\r\nconst {SubMenu} = Menu;\r\nconst {Meta} = Card;\r\n\r\nexport default function ArtistList(props) {\r\n    const [data, setData] = useState([]);\r\n    const [selectedKeys, setSelectedKeys] = useState('artist_location=hot');\r\n\r\n    useEffect(() => {\r\n        // const {artistLocation, artistType} = props.match.params;\r\n        const params = new URLSearchParams(props.location.search);\r\n        const artistLocation = params.get('artist_location');\r\n        const artistType = params.get('artist_type');\r\n        if (artistLocation === 'hot') {\r\n            axios({\r\n                method: 'GET',\r\n                url: SERVER_URL + 'artistList',\r\n                params: {\r\n                    artistLocation: artistLocation\r\n                }\r\n            }).then((response) => {\r\n                if (response.data.status === 200) {\r\n                    setData(response.data.data);\r\n                    setSelectedKeys('artist_location=hot');\r\n                } else {\r\n                    props.history.push('/error');\r\n                }\r\n            });\r\n        } else {\r\n            axios({\r\n                method: 'GET',\r\n                url: SERVER_URL + 'artistList',\r\n                params: {\r\n                    artistLocation: artistLocation,\r\n                    artistType: artistType\r\n                }\r\n            }).then((response) => {\r\n                if (response.data.status === 200) {\r\n                    setData(response.data.data);\r\n                    setSelectedKeys(`artist_location=${artistLocation}&artist_type=${artistType}`);\r\n                } else {\r\n                    props.history.push('/error');\r\n                }\r\n            });\r\n        }\r\n    }, [props])\r\n\r\n    const handleClick = (obj) => {\r\n        props.history.push(`/artist_list?${obj.key}`);\r\n    }\r\n\r\n    return (\r\n        <Layout>\r\n            <Sider style={{width: 250}}>\r\n                <Menu mode=\"inline\" style={{height: '100%'}} onClick={handleClick} defaultOpenKeys={['0', '1', '2']} selectedKeys={selectedKeys}>\r\n                    <Menu.Item key=\"artist_location=hot\">热门歌手</Menu.Item>\r\n                    <SubMenu key=\"0\" title=\"华语\">\r\n                        <Menu.Item key=\"artist_location=0&artist_type=0\">华语男歌手</Menu.Item>\r\n                        <Menu.Item key=\"artist_location=0&artist_type=1\">华语女歌手</Menu.Item>\r\n                        <Menu.Item key=\"artist_location=0&artist_type=2\">华语组合/乐队</Menu.Item>\r\n                    </SubMenu>\r\n                    <SubMenu key=\"1\" title=\"欧美\">\r\n                        <Menu.Item key=\"artist_location=1&artist_type=0\">欧美男歌手</Menu.Item>\r\n                        <Menu.Item key=\"artist_location=1&artist_type=1\">欧美女歌手</Menu.Item>\r\n                        <Menu.Item key=\"artist_location=1&artist_type=2\">欧美组合/乐队</Menu.Item>\r\n                    </SubMenu>\r\n                    <SubMenu key=\"2\" title=\"日韩\">\r\n                        <Menu.Item key=\"artist_location=2&artist_type=0\">日韩男歌手</Menu.Item>\r\n                        <Menu.Item key=\"artist_location=2&artist_type=1\">日韩女歌手</Menu.Item>\r\n                        <Menu.Item key=\"artist_location=2&artist_type=2\">日韩组合/乐队</Menu.Item>\r\n                    </SubMenu>\r\n                </Menu>\r\n            </Sider>\r\n            <Content style={{ paddingLeft: '10px', minHeight: 280}}>\r\n                <Row gutter={[10, 5]}>\r\n                    {data.map((artist, index) => {\r\n                        return (<Col span={6} key={index}>\r\n                            <Link to={`/artist/${artist.artistId}`}>\r\n                                    <Card hoverable cover={<img alt={artist.artistName} src={artist.artistImg} />}>\r\n                                            <Meta title={artist.artistName} style={{textAlign: 'center'}} />\r\n                                    </Card>\r\n                            </Link>\r\n                        </Col>)\r\n                    })}\r\n                </Row>\r\n            </Content>\r\n        </Layout>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}