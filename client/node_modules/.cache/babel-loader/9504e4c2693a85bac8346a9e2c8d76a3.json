{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programming\\\\Project\\\\MusicRecommendSystem\\\\front\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport { Button, Layout, Menu, Input, Modal, Form, Checkbox, Dropdown } from 'antd';\nimport { Link, Route, Switch } from 'react-router-dom';\nimport 'antd/dist/antd.min.css';\nimport './App.css';\nimport ArtistCat from './pages/ArtistCat';\nimport Artist from './pages/Artist';\nimport PlayBar from './components/PlayBar';\nimport Album from './pages/Album';\nimport { LockOutlined, UserOutlined, PoweroffOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nimport { getToken, isLogin } from './utils/auth.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Header,\n  Content,\n  Footer\n} = Layout;\nconst {\n  Search\n} = Input;\nexport default class App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isLoginModalVisible: false,\n      isRegisterModalVisible: false,\n      user: {}\n    };\n\n    this.logout = obj => {\n      if (obj.key === 'logout') {\n        localStorage.removeItem('token');\n        sessionStorage.removeItem('token');\n        this.setState({\n          user: {}\n        });\n      }\n    };\n\n    this.userMenu = () => {\n      return /*#__PURE__*/_jsxDEV(Menu, {\n        onClick: this.logout,\n        children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n          icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 45\n          }, this),\n          children: \"\\u6211\\u7684\\u4E3B\\u9875\"\n        }, \"home\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n          icon: /*#__PURE__*/_jsxDEV(PoweroffOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 47\n          }, this),\n          children: \"\\u9000\\u51FA\"\n        }, \"logout\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 13\n      }, this);\n    };\n\n    this.showLoginModal = () => {\n      this.closeRegisterModal();\n      this.setState({\n        isLoginModalVisible: true\n      });\n    };\n\n    this.closeLoginModal = () => {\n      this.setState({\n        isLoginModalVisible: false\n      });\n    };\n\n    this.showRegisterModal = () => {\n      this.closeLoginModal();\n      this.setState({\n        isRegisterModalVisible: true\n      });\n    };\n\n    this.closeRegisterModal = () => {\n      this.setState({\n        isRegisterModalVisible: false\n      });\n    };\n\n    this.login = value => {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:3001/server/login',\n        params: {\n          username: value.username,\n          password: value.password\n        }\n      }).then(response => {\n        if (response.data.code !== 1) {\n          this.alert1.innerHTML = response.data.msg;\n          this.alert1.style.display = 'block';\n        } else {\n          if (value.remember) {\n            localStorage.setItem('token', response.data.data.username);\n          } else {\n            sessionStorage.setItem('token', response.data.data.username);\n          }\n\n          this.setState({\n            user: response.data.data\n          });\n          this.closeLoginModal();\n        }\n      });\n    };\n\n    this.register = value => {\n      if (value.confirm !== value.password) {\n        this.alert2.innerHTML = '密码不一致';\n        this.alert2.style.display = 'block';\n        return;\n      }\n\n      axios({\n        method: 'POST',\n        url: 'http://localhost:3001/server/register',\n        params: {\n          username: value.username,\n          password: value.password,\n          nickname: value.nickname\n        }\n      }).then(response => {\n        if (response.data.code === 1) {\n          sessionStorage.setItem('token', response.data.data.username);\n          this.setState({\n            user: response.data.data\n          });\n          this.closeRegisterModal();\n        } else {\n          this.alert2.innerHTML = response.data.msg;\n          this.alert2.style.display = 'block';\n        }\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (isLogin()) {\n      axios({\n        method: 'GET',\n        url: 'http://localhost:3001/server/userinfo',\n        params: {\n          username: getToken()\n        }\n      }).then(response => {\n        if (response.data.code === 1) {\n          this.setState({\n            user: response.data.data\n          });\n        }\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Layout, {\n        className: \"layout\",\n        style: {\n          minHeight: '100vh'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Content, {\n          style: {\n            width: '1000px',\n            margin: '0 auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"site-layout-content\",\n            children: /*#__PURE__*/_jsxDEV(Switch, {\n              children: [/*#__PURE__*/_jsxDEV(Route, {\n                path: \"/artist/:artistId\",\n                component: Artist\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/artist_list\",\n                component: ArtistCat\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"/album/:albumId\",\n                component: Album\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {\n          style: {\n            textAlign: 'center',\n            height: '150px'\n          },\n          children: \"718\\u97F3\\u4E50 \\xA92021 Created by YWJ\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PlayBar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"sources":["D:/Programming/Project/MusicRecommendSystem/front/src/App.js"],"names":["React","Component","Button","Layout","Menu","Input","Modal","Form","Checkbox","Dropdown","Link","Route","Switch","ArtistCat","Artist","PlayBar","Album","LockOutlined","UserOutlined","PoweroffOutlined","axios","getToken","isLogin","Header","Content","Footer","Search","App","state","isLoginModalVisible","isRegisterModalVisible","user","logout","obj","key","localStorage","removeItem","sessionStorage","setState","userMenu","showLoginModal","closeRegisterModal","closeLoginModal","showRegisterModal","login","value","method","url","params","username","password","then","response","data","code","alert1","innerHTML","msg","style","display","remember","setItem","register","confirm","alert2","nickname","componentDidMount","render","minHeight","width","margin","textAlign","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Layout, Menu, Input, Modal, Form, Checkbox, Dropdown } from 'antd';\nimport {Link, Route, Switch} from 'react-router-dom';\nimport 'antd/dist/antd.min.css';\nimport './App.css';\nimport ArtistCat from './pages/ArtistCat';\nimport Artist from './pages/Artist';\nimport PlayBar from './components/PlayBar';\nimport Album from './pages/Album';\nimport { LockOutlined, UserOutlined, PoweroffOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nimport {getToken, isLogin} from './utils/auth.js';\n\nconst { Header, Content, Footer } = Layout;\nconst {Search} = Input;\n\nexport default class App extends Component {\n    state = {isLoginModalVisible: false, isRegisterModalVisible: false, user: {}};\n\n    componentDidMount() {\n        if (isLogin()) {\n            axios({\n                method: 'GET',\n                url: 'http://localhost:3001/server/userinfo',\n                params: {\n                    username: getToken()\n                }\n            }).then((response) => {\n                if (response.data.code === 1) {\n                    this.setState({user: response.data.data});\n                }\n            });\n        }\n    }\n\n    logout = (obj) => {\n        if (obj.key === 'logout') {\n            localStorage.removeItem('token');\n            sessionStorage.removeItem('token');\n            this.setState({user: {}})\n        }\n    }\n\n    userMenu = () => {\n        return (\n            <Menu onClick={this.logout}>\n                <Menu.Item key=\"home\" icon={<UserOutlined />}>\n                    我的主页\n                </Menu.Item>\n                <Menu.Item key=\"logout\" icon={<PoweroffOutlined />}>\n                    退出\n                </Menu.Item>\n            </Menu>\n        );\n    }\n\n    showLoginModal = () => {\n        this.closeRegisterModal();\n        this.setState({isLoginModalVisible: true});\n    }\n\n    closeLoginModal = () => {\n        this.setState({isLoginModalVisible: false});\n    }\n\n    showRegisterModal = () => {\n        this.closeLoginModal();\n        this.setState({isRegisterModalVisible: true});\n    }\n\n    closeRegisterModal = () => {\n        this.setState({isRegisterModalVisible: false});\n    }\n\n    login = (value) => {\n        axios({\n            method: 'GET',\n            url: 'http://localhost:3001/server/login',\n            params: {\n                username: value.username,\n                password: value.password\n            }\n        }).then((response) => {\n            if (response.data.code !== 1) {\n                this.alert1.innerHTML = response.data.msg;\n                this.alert1.style.display = 'block';\n            } else {\n                if (value.remember) {\n                    localStorage.setItem('token', response.data.data.username);\n                } else {\n                    sessionStorage.setItem('token', response.data.data.username);\n                }\n                this.setState({user: response.data.data});\n                this.closeLoginModal();\n            }\n        })\n    }\n\n    register = (value) => {\n        if (value.confirm !== value.password) {\n            this.alert2.innerHTML = '密码不一致';\n            this.alert2.style.display = 'block';\n            return;\n        }\n        axios({\n            method: 'POST',\n            url: 'http://localhost:3001/server/register',\n            params: {\n                username: value.username,\n                password: value.password,\n                nickname: value.nickname\n            }\n        }).then((response) => {\n            if (response.data.code === 1) {\n                sessionStorage.setItem('token', response.data.data.username);\n                this.setState({user: response.data.data});\n                this.closeRegisterModal();\n            } else {\n                this.alert2.innerHTML = response.data.msg;\n                this.alert2.style.display = 'block';\n            }\n        })\n    }\n\n    render() {\n        return (\n            <>\n                <Layout className=\"layout\" style={{minHeight: '100vh'}}>\n                    \n                    <Content style={{ width: '1000px', margin: '0 auto' }}>\n                        <div className=\"site-layout-content\">\n                            <Switch>\n                                <Route path=\"/artist/:artistId\" component={Artist} />\n                                <Route path=\"/artist_list\" component={ArtistCat} />\n                                <Route path=\"/album/:albumId\" component={Album} />\n                            </Switch>\n                        </div>\n                    </Content>\n                    <Footer style={{ textAlign: 'center', height: '150px' }}>718音乐 ©2021 Created by YWJ</Footer>\n                </Layout>\n                <PlayBar />\n            </>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}