{"ast":null,"code":"import _slicedToArray from\"D:/Programming/Project/Music_Recommend_System/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import{Card,Layout,Typography,Menu,Table,Button,Row,Col}from'antd';import{Link}from'react-router-dom';import{SERVER_URL}from'../../utils/constant';import{removeToken}from'../../utils/auth';import{playBarStore}from\"../../stores/playBarStore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Paragraph=Typography.Paragraph;var Content=Layout.Content;var Meta=Card.Meta;var colomns=[{key:'index',render:function render(text,record,index){return index+1;}},{dataIndex:'musicName',key:'musicName',title:'歌曲',render:function render(text,record,index){return/*#__PURE__*/_jsx(Button,{type:\"link\",onClick:function onClick(){playBarStore.addMusic(record);},children:text});},width:'500px'},{dataIndex:'albumName',key:'albumName',title:'专辑',render:function render(text,record,index){return/*#__PURE__*/_jsx(Link,{to:\"/album/\".concat(record.albumId),children:text});},width:'400px'},{dataIndex:'timeLength',key:'timeLength',title:'时长',render:function render(text){text=parseInt(text);text/=1000;var min=Math.floor(text/60);if(min<10){min='0'+min;}var sec=Math.floor(text%60);if(sec<10){sec='0'+sec;}return/*#__PURE__*/_jsx(\"span\",{children:min+':'+sec});},width:'100px'}];export default function Artist(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),musicData=_useState2[0],setMusicData=_useState2[1];var _useState3=useState({artistAlbumVOList:[]}),_useState4=_slicedToArray(_useState3,2),albumData=_useState4[0],setAlbumData=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),type=_useState6[0],setType=_useState6[1];useEffect(function(){getMusic();// eslint-disable-next-line\n},[]);var getMusic=function getMusic(){axios({method:'GET',url:SERVER_URL+'artist/'+props.match.params.artistId}).then(function(response){if(response.data.status===200){setMusicData(response.data.data);setType('music');}else{props.history.push('/error');}});};var getAlbum=function getAlbum(){axios({method:'GET',url:SERVER_URL+'artist/album/'+props.match.params.artistId}).then(function(response){if(response.data.status===2){removeToken();props.history.push('/');}else if(response.data.status===1){setAlbumData(response.data.data);setType('album');}});};var handleClick=function handleClick(obj){if(obj.key==='music'){if(JSON.stringify(musicData)==='{}'){getMusic();}setType('music');}else{if(albumData.artistAlbumVOList.length===0){getAlbum();}setType('album');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'200px'},children:[/*#__PURE__*/_jsx(\"img\",{alt:musicData.artistName,src:musicData.artistImg}),/*#__PURE__*/_jsx(Card,{title:musicData.artistName,style:{overflow:'scroll',overflowX:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{overflow:'auto'},children:/*#__PURE__*/_jsx(Paragraph,{ellipsis:{rows:3,expandable:true,suffix:'...',symbol:'展开'},children:musicData.artistDescription})})})]}),/*#__PURE__*/_jsxs(Content,{style:{padding:'10px',minHeight:280},children:[/*#__PURE__*/_jsxs(Menu,{mode:\"horizontal\",defaultSelectedKeys:\"music\",onClick:handleClick,children:[/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u5355\\u66F2\"},\"music\"),/*#__PURE__*/_jsx(Menu.Item,{children:\"\\u4E13\\u8F91\"},\"album\")]}),type==='music'?/*#__PURE__*/_jsx(Table,{columns:colomns,dataSource:musicData.musicVOList,showHeader:false,pagination:{defaultPageSize:20},rowKey:function rowKey(record){return record.musicId;}}):/*#__PURE__*/_jsx(Row,{gutter:[10,5],children:albumData.artistAlbumVOList.map(function(album){return/*#__PURE__*/_jsx(Col,{span:6,children:/*#__PURE__*/_jsx(Link,{to:\"/album/\".concat(album.albumId),children:/*#__PURE__*/_jsx(Card,{hoverable:true,cover:/*#__PURE__*/_jsx(\"img\",{alt:album.albumName,src:album.albumImg}),children:/*#__PURE__*/_jsx(Meta,{title:album.albumName,style:{textAlign:'center'},description:album.albumPublishTime})})})});})})]})]});}","map":{"version":3,"sources":["D:/Programming/Project/Music_Recommend_System/client/src/pages/Artist/index.jsx"],"names":["React","useState","useEffect","axios","Card","Layout","Typography","Menu","Table","Button","Row","Col","Link","SERVER_URL","removeToken","playBarStore","Paragraph","Content","Meta","colomns","key","render","text","record","index","dataIndex","title","addMusic","width","albumId","parseInt","min","Math","floor","sec","Artist","props","musicData","setMusicData","artistAlbumVOList","albumData","setAlbumData","type","setType","getMusic","method","url","match","params","artistId","then","response","data","status","history","push","getAlbum","handleClick","obj","JSON","stringify","length","display","height","artistName","artistImg","overflow","overflowX","rows","expandable","suffix","symbol","artistDescription","padding","minHeight","musicVOList","defaultPageSize","musicId","map","album","albumName","albumImg","textAlign","albumPublishTime"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios';\r\nimport { Card, Layout, Typography, Menu, Table, Button, Row, Col } from 'antd';\r\nimport {Link} from 'react-router-dom';\r\nimport { SERVER_URL } from '../../utils/constant';\r\nimport { removeToken } from '../../utils/auth';\r\nimport {playBarStore} from \"../../stores/playBarStore\";\r\n\r\nconst { Paragraph } = Typography;\r\nconst {Content} = Layout;\r\nconst {Meta} = Card;\r\n\r\nconst colomns = [\r\n    {\r\n        key: 'index',\r\n        render: (text,record,index) => {return index + 1;}\r\n    },\r\n    {\r\n        dataIndex: 'musicName',\r\n        key: 'musicName',\r\n        title: '歌曲',\r\n        render: (text, record, index) => {\r\n            return (<Button type=\"link\" onClick={() => {\r\n                playBarStore.addMusic(record);\r\n            }}>{text}</Button>);\r\n        },\r\n        width: '500px'\r\n    },\r\n    {\r\n        dataIndex: 'albumName',\r\n        key: 'albumName',\r\n        title: '专辑',\r\n        render: (text, record, index) => {\r\n            return (<Link to={`/album/${record.albumId}`}>{text}</Link>);\r\n        },\r\n        width: '400px'\r\n    },\r\n    {\r\n        dataIndex: 'timeLength',\r\n        key: 'timeLength',\r\n        title: '时长',\r\n        render: (text) => {\r\n            text = parseInt(text);\r\n            text /= 1000;\r\n            var min = Math.floor(text / 60);\r\n            if (min < 10) {\r\n                min = '0' + min;\r\n            }\r\n            var sec = Math.floor(text % 60);\r\n            if (sec < 10) {\r\n                sec = '0' + sec;\r\n            }\r\n            return (<span>{min + ':' + sec}</span>);\r\n        },\r\n        width: '100px'\r\n    }\r\n];\r\n\r\nexport default function Artist(props) {\r\n    const [musicData, setMusicData] = useState({});\r\n    const [albumData, setAlbumData] = useState({artistAlbumVOList: []});\r\n    const [type, setType] = useState('');\r\n\r\n    useEffect(() => {\r\n        getMusic();  // eslint-disable-next-line\r\n    }, []);\r\n\r\n    const getMusic = () => {\r\n        axios({\r\n            method: 'GET',\r\n            url: SERVER_URL + 'artist/' + props.match.params.artistId\r\n        }).then((response) => {\r\n            if (response.data.status === 200) {\r\n                setMusicData(response.data.data);\r\n                setType('music');\r\n            } else {\r\n                props.history.push('/error');\r\n            }\r\n        });\r\n    }\r\n\r\n    const getAlbum = () => {\r\n        axios({\r\n            method: 'GET',\r\n            url: SERVER_URL + 'artist/album/' + props.match.params.artistId\r\n        }).then((response) => {\r\n            if (response.data.status === 2) {\r\n                removeToken();\r\n                props.history.push('/');\r\n            } else if (response.data.status === 1) {\r\n                setAlbumData(response.data.data);\r\n                setType('album');\r\n            }\r\n        });\r\n    }\r\n\r\n    const handleClick = (obj) => {\r\n        if (obj.key === 'music') {\r\n            if (JSON.stringify(musicData) === '{}') {\r\n                getMusic();\r\n            }\r\n            setType('music');\r\n        } else {\r\n            if (albumData.artistAlbumVOList.length === 0) {\r\n                getAlbum();\r\n            }\r\n            setType('album');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div style={{display: 'flex', height: '200px'}}>\r\n                <img alt={musicData.artistName} src={musicData.artistImg} />\r\n                <Card title={musicData.artistName} style={{overflow: 'scroll', overflowX: 'hidden'}}>\r\n                    <div style={{overflow: 'auto'}}>\r\n                        <Paragraph ellipsis={{rows: 3, expandable: true, suffix: '...', symbol: '展开'}}>\r\n                            {musicData.artistDescription}\r\n                        </Paragraph>\r\n                    </div>\r\n                </Card>\r\n            </div>\r\n            <Content style={{ padding: '10px', minHeight: 280}}>\r\n                <Menu mode=\"horizontal\" defaultSelectedKeys=\"music\" onClick={handleClick}>\r\n                    <Menu.Item key=\"music\">\r\n                        单曲\r\n                    </Menu.Item>\r\n                    <Menu.Item key=\"album\">\r\n                        专辑\r\n                    </Menu.Item>\r\n                </Menu>\r\n                {type === 'music' ? \r\n                <Table columns={colomns} dataSource={musicData.musicVOList} showHeader={false} pagination={{defaultPageSize: 20}} rowKey={record => record.musicId} />\r\n                : <Row gutter={[10, 5]}>\r\n                    {albumData.artistAlbumVOList.map((album) => {\r\n                        return (<Col span={6}>\r\n                            <Link to={`/album/${album.albumId}`}>\r\n                                <Card hoverable cover={<img alt={album.albumName} src={album.albumImg} />}>\r\n                                        <Meta title={album.albumName} style={{textAlign: 'center'}} description={album.albumPublishTime} />\r\n                                </Card>\r\n                            </Link>\r\n                        </Col>)\r\n                    })}\r\n                </Row>}\r\n            </Content>\r\n        </>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}