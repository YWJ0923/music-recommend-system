{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programming\\\\React\\\\Music_Recommend_System\\\\front\\\\src\\\\components\\\\MyHeader\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Button, Menu, Input, Modal, Form, Checkbox, Dropdown, Layout } from 'antd';\nimport { withRouter } from 'react-router-dom';\nimport 'antd/dist/antd.min.css';\nimport { LockOutlined, UserOutlined, LogoutOutlined } from '@ant-design/icons';\nimport axios from 'axios';\nimport { removeToken } from '../../utils/auth.js';\nimport PubSub from 'pubsub-js';\nimport { observer, useLocalObservable } from \"mobx-react\";\nimport { userStore } from \"../../stores/userStore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Header\n} = Layout;\nconst {\n  Search\n} = Input;\n\nfunction MyHeader(props) {\n  _s();\n\n  const {\n    user,\n    setUser\n  } = useLocalObservable(() => userStore);\n  const [isLoginModalVisible, setIsLoginModalVisible] = useState(false);\n  const [isRegisterModalVisible, setIsRegisterModalVisible] = useState(false);\n  useEffect(() => {\n    PubSub.subscribe('showLoginModal', showLoginModal);\n    return () => {\n      PubSub.unsubscribe('showLoginModal');\n    }; // eslint-disable-next-line\n  }, []);\n  const alert1 = useRef(null);\n  const alert2 = useRef(null);\n\n  const handleClickUserMenu = obj => {\n    if (obj.key === 'logout') {\n      removeToken();\n      PubSub.publish('logout');\n    }\n  };\n\n  const userMenu = () => {\n    return /*#__PURE__*/_jsxDEV(Menu, {\n      onClick: handleClickUserMenu,\n      children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n        icon: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 45\n        }, this),\n        children: \"\\u6211\\u7684\\u4E3B\\u9875\"\n      }, \"home\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n        icon: /*#__PURE__*/_jsxDEV(LogoutOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 47\n        }, this),\n        children: \"\\u9000\\u51FA\"\n      }, \"logout\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this);\n  };\n\n  const showLoginModal = () => {\n    closeRegisterModal();\n    setIsLoginModalVisible(true);\n  };\n\n  const closeLoginModal = () => {\n    setIsLoginModalVisible(false);\n  };\n\n  const showRegisterModal = () => {\n    closeLoginModal();\n    setIsRegisterModalVisible(true);\n  };\n\n  const closeRegisterModal = () => {\n    setIsRegisterModalVisible(false);\n  };\n\n  const login = value => {\n    axios({\n      method: 'POST',\n      url: 'http://localhost:3001/server/login',\n      data: {\n        username: value.username,\n        password: value.password\n      }\n    }).then(response => {\n      if (response.data.status !== 200) {\n        alert1.current.innerHTML = response.data.message;\n        alert1.current.style.display = 'block';\n      } else {\n        if (value.remember) {\n          localStorage.setItem('token', response.data.token);\n        }\n\n        sessionStorage.setItem('token', response.data.token);\n        setUser(response.data.data);\n        closeLoginModal();\n      }\n    });\n  };\n\n  const register = value => {\n    if (value.confirm !== value.password) {\n      alert2.current.innerHTML = '密码不一致';\n      alert2.current.style.display = 'block';\n      return;\n    }\n\n    axios({\n      method: 'POST',\n      url: 'http://localhost:3001/server/register',\n      data: {\n        username: value.username,\n        password: value.password,\n        nickname: value.nickname\n      }\n    }).then(response => {\n      if (response.data.status === 200) {\n        sessionStorage.setItem('token', response.data.token);\n        setUser(response.data.data);\n        closeRegisterModal();\n      } else {\n        this.alert2.innerHTML = response.data.message;\n        this.alert2.style.display = 'block';\n      }\n    });\n  };\n\n  const search = value => {\n    if (value.trim() !== '') {\n      props.history.push('/search/music/' + value);\n    }\n  };\n\n  const handleClick = obj => {\n    if (obj.key === 'my_music') {\n      if (user) {\n        props.history.push('/my_music');\n      } else {\n        showLoginModal();\n      }\n    } else if (obj.key === 'artist') {\n      props.history.push('/artist_list');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Header, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '1100px',\n        margin: '0 auto',\n        display: 'flex'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo\",\n        style: {\n          color: 'white'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"fa fa-music\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this), \"\\xA0 718\\u97F3\\u4E50\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Menu, {\n        theme: \"dark\",\n        mode: \"horizontal\",\n        defaultSelectedKeys: \"artist\",\n        style: {\n          marginLeft: 100\n        },\n        onClick: handleClick,\n        children: [/*#__PURE__*/_jsxDEV(Menu.Item, {\n          children: \"\\u63A8\\u8350\"\n        }, \"recommend\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n          children: \"\\u6392\\u884C\\u699C\"\n        }, \"ranking\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n          children: \"\\u6B4C\\u624B\"\n        }, \"artist\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Menu.Item, {\n          children: \"\\u6211\\u7684\\u97F3\\u4E50\"\n        }, \"my_music\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Search, {\n        placeholder: \"\\u641C\\u7D22\",\n        style: {\n          width: '200px',\n          display: 'block',\n          margin: 'auto 50px auto 50px'\n        },\n        onSearch: search\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), user ? /*#__PURE__*/_jsxDEV(Dropdown, {\n        overlay: userMenu,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"link\",\n          style: {\n            color: 'yellow',\n            display: 'block',\n            margin: 'auto 0 auto auto'\n          },\n          children: props.user.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 54\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        style: {\n          display: 'block',\n          margin: 'auto 0 auto auto'\n        },\n        onClick: showLoginModal,\n        children: \"\\u767B\\u5F55\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        title: \"\\u767B\\u5F55\",\n        visible: isLoginModalVisible,\n        onCancel: closeLoginModal,\n        footer: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          style: {\n            float: 'left'\n          },\n          onClick: showRegisterModal,\n          children: \"\\u6CE8\\u518C\"\n        }, \"register\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: closeLoginModal,\n          children: \"\\u53D6\\u6D88\"\n        }, \"cancel\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 21\n        }, this)],\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onFinish: login,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            ref: alert1,\n            style: {\n              backgroundColor: '#ffccc7',\n              width: '100%',\n              padding: '8px 15px',\n              marginBottom: '10px',\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"username\",\n            rules: [{\n              required: true,\n              message: '用户名不能为空!'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 44\n              }, this),\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"password\",\n            rules: [{\n              required: true,\n              message: '密码不能为空!'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input.Password, {\n              prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 53\n              }, this),\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            children: /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"remember\",\n              valuePropName: \"checked\",\n              noStyle: true,\n              children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                children: \"\\u8BB0\\u4F4F\\u6211\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              htmlType: \"submit\",\n              style: {\n                width: '100%'\n              },\n              children: \"\\u767B\\u5F55\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        title: \"\\u6CE8\\u518C\",\n        visible: isRegisterModalVisible,\n        destroyOnClose: true,\n        onCancel: closeRegisterModal,\n        footer: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          style: {\n            float: 'left'\n          },\n          onClick: showLoginModal,\n          children: \"\\u767B\\u5F55\"\n        }, \"register\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: closeRegisterModal,\n          children: \"\\u53D6\\u6D88\"\n        }, \"cancel\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this)],\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onFinish: register,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            ref: alert2,\n            style: {\n              backgroundColor: '#ffccc7',\n              width: '100%',\n              padding: '8px 15px',\n              marginBottom: '10px',\n              display: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"username\",\n            label: \"\\u7528\\u6237\\u540D\",\n            rules: [{\n              required: true,\n              message: '用户名不能为空!'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"password\",\n            label: \"\\u5BC6\\u7801\",\n            rules: [{\n              required: true,\n              message: '密码不能为空!'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input.Password, {\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"confirm\",\n            label: \"\\u786E\\u8BA4\\u5BC6\\u7801\",\n            dependencies: ['password'],\n            rules: [{\n              required: true,\n              message: '密码不能为空!'\n            }, ({\n              getFieldValue\n            }) => ({\n              validator(_, value) {\n                if (!value || getFieldValue('password') === value) {\n                  return Promise.resolve();\n                }\n\n                return Promise.reject(new Error('密码不一致!'));\n              }\n\n            })],\n            children: /*#__PURE__*/_jsxDEV(Input.Password, {\n              placeholder: \"\\u8BF7\\u518D\\u6B21\\u8F93\\u5165\\u5BC6\\u7801\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            name: \"nickname\",\n            label: \"\\u6635\\u79F0\",\n            rules: [{\n              required: true,\n              message: '昵称不能为空!'\n            }],\n            children: /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"\\u8BF7\\u8F93\\u5165\\u6635\\u79F0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              htmlType: \"submit\",\n              style: {\n                width: '100%'\n              },\n              children: \"\\u6CE8\\u518C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MyHeader, \"6Os3U01nlKHoSw9VC/2GsQLYljw=\", false, function () {\n  return [useLocalObservable];\n});\n\n_c = MyHeader;\nexport default _c3 = observer(_c2 = withRouter(MyHeader));\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"MyHeader\");\n$RefreshReg$(_c2, \"%default%$observer\");\n$RefreshReg$(_c3, \"%default%\");","map":{"version":3,"sources":["D:/Programming/React/Music_Recommend_System/front/src/components/MyHeader/index.jsx"],"names":["React","useEffect","useRef","useState","Button","Menu","Input","Modal","Form","Checkbox","Dropdown","Layout","withRouter","LockOutlined","UserOutlined","LogoutOutlined","axios","removeToken","PubSub","observer","useLocalObservable","userStore","Header","Search","MyHeader","props","user","setUser","isLoginModalVisible","setIsLoginModalVisible","isRegisterModalVisible","setIsRegisterModalVisible","subscribe","showLoginModal","unsubscribe","alert1","alert2","handleClickUserMenu","obj","key","publish","userMenu","closeRegisterModal","closeLoginModal","showRegisterModal","login","value","method","url","data","username","password","then","response","status","current","innerHTML","message","style","display","remember","localStorage","setItem","token","sessionStorage","register","confirm","nickname","search","trim","history","push","handleClick","width","margin","color","marginLeft","float","backgroundColor","padding","marginBottom","required","getFieldValue","validator","_","Promise","resolve","reject","Error"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\r\nimport { Button, Menu, Input, Modal, Form, Checkbox, Dropdown, Layout } from 'antd';\r\nimport {withRouter} from 'react-router-dom';\r\nimport 'antd/dist/antd.min.css';\r\nimport { LockOutlined, UserOutlined, LogoutOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\nimport {removeToken} from '../../utils/auth.js';\r\nimport PubSub from 'pubsub-js';\r\nimport {observer, useLocalObservable} from \"mobx-react\";\r\nimport {userStore} from \"../../stores/userStore\";\r\n\r\nconst { Header } = Layout;\r\nconst {Search} = Input;\r\n\r\nfunction MyHeader(props) {\r\n    const {user, setUser} = useLocalObservable(() => userStore);\r\n    const [isLoginModalVisible, setIsLoginModalVisible] = useState(false);\r\n    const [isRegisterModalVisible, setIsRegisterModalVisible] = useState(false);\r\n\r\n    useEffect(() => {\r\n        PubSub.subscribe('showLoginModal', showLoginModal);\r\n        return () => {\r\n            PubSub.unsubscribe('showLoginModal');\r\n        }  // eslint-disable-next-line\r\n    }, []);\r\n    \r\n    const alert1 = useRef(null);\r\n    const alert2 = useRef(null);\r\n\r\n    const handleClickUserMenu = (obj) => {\r\n        if (obj.key === 'logout') {\r\n            removeToken();\r\n            PubSub.publish('logout');\r\n        }\r\n    }\r\n\r\n    const userMenu = () => {\r\n        return (\r\n            <Menu onClick={handleClickUserMenu}>\r\n                <Menu.Item key=\"home\" icon={<UserOutlined />}>\r\n                    我的主页\r\n                </Menu.Item>\r\n                <Menu.Item key=\"logout\" icon={<LogoutOutlined />}>\r\n                    退出\r\n                </Menu.Item>\r\n            </Menu>\r\n        );\r\n    }\r\n\r\n    const showLoginModal = () => {\r\n        closeRegisterModal();\r\n        setIsLoginModalVisible(true);\r\n    }\r\n\r\n    const closeLoginModal = () => {\r\n        setIsLoginModalVisible(false);\r\n    }\r\n\r\n    const showRegisterModal = () => {\r\n        closeLoginModal();\r\n        setIsRegisterModalVisible(true);\r\n    }\r\n\r\n    const closeRegisterModal = () => {\r\n        setIsRegisterModalVisible(false);\r\n    }\r\n\r\n    const login = (value) => {\r\n        axios({\r\n            method: 'POST',\r\n            url: 'http://localhost:3001/server/login',\r\n            data: {\r\n                username: value.username,\r\n                password: value.password\r\n            }\r\n        }).then((response) => {\r\n            if (response.data.status !== 200) {\r\n                alert1.current.innerHTML = response.data.message;\r\n                alert1.current.style.display = 'block';\r\n            } else {\r\n                if (value.remember) {\r\n                    localStorage.setItem('token', response.data.token);\r\n                } \r\n                sessionStorage.setItem('token', response.data.token);\r\n                setUser(response.data.data);\r\n                closeLoginModal();\r\n            }\r\n        })\r\n    }\r\n\r\n    const register = (value) => {\r\n        if (value.confirm !== value.password) {\r\n            alert2.current.innerHTML = '密码不一致';\r\n            alert2.current.style.display = 'block';\r\n            return;\r\n        }\r\n        axios({\r\n            method: 'POST',\r\n            url: 'http://localhost:3001/server/register',\r\n            data: {\r\n                username: value.username,\r\n                password: value.password,\r\n                nickname: value.nickname\r\n            }\r\n        }).then((response) => {\r\n            if (response.data.status === 200) {\r\n                sessionStorage.setItem('token', response.data.token);\r\n                setUser(response.data.data);\r\n                closeRegisterModal();\r\n            } else {\r\n                this.alert2.innerHTML = response.data.message;\r\n                this.alert2.style.display = 'block';\r\n            }\r\n        });\r\n    }\r\n\r\n    const search = (value) => {\r\n        if (value.trim() !== '') {\r\n            props.history.push('/search/music/' + value);\r\n        }\r\n    }\r\n\r\n    const handleClick = (obj) => {\r\n        if (obj.key === 'my_music') {\r\n            if (user) {\r\n                props.history.push('/my_music');\r\n            } else {\r\n                showLoginModal();\r\n            }\r\n        } else if (obj.key === 'artist') {\r\n            props.history.push('/artist_list');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Header>\r\n            <div style={{width: '1100px', margin: '0 auto', display: 'flex'}}>\r\n                <div className=\"logo\" style={{color: 'white'}}>\r\n                    <span className=\"fa fa-music\"></span>&nbsp;\r\n                    718音乐\r\n                </div>\r\n                <Menu theme=\"dark\" mode=\"horizontal\" defaultSelectedKeys=\"artist\" style={{marginLeft: 100}} onClick={handleClick}>\r\n                    <Menu.Item key=\"recommend\">推荐</Menu.Item>\r\n                    <Menu.Item key=\"ranking\">排行榜</Menu.Item>\r\n                    <Menu.Item key=\"artist\">歌手</Menu.Item>\r\n                    <Menu.Item key=\"my_music\">我的音乐</Menu.Item>\r\n                </Menu>\r\n                <Search placeholder=\"搜索\" style={{ width: '200px', display: 'block', margin: 'auto 50px auto 50px'}} onSearch={search} />\r\n                {user ? <Dropdown overlay={userMenu}><Button type=\"link\" style={{color: 'yellow', display: 'block', margin: 'auto 0 auto auto'}}>{props.user.username}</Button></Dropdown>\r\n                : <Button type=\"primary\" style={{display: 'block', margin: 'auto 0 auto auto'}} onClick={showLoginModal}>登录</Button>}\r\n                <Modal title=\"登录\" visible={isLoginModalVisible} onCancel={closeLoginModal} footer={[\r\n                    <Button key=\"register\" type=\"primary\" style={{float: 'left'}} onClick={showRegisterModal}>注册</Button>,\r\n                    <Button key=\"cancel\" onClick={closeLoginModal}>取消</Button>,\r\n                ]}>\r\n                    <Form onFinish={login}>\r\n                        <div ref={alert1} style={{backgroundColor: '#ffccc7', width: '100%', padding: '8px 15px', marginBottom: '10px', display: 'none'}}></div>\r\n                        <Form.Item name=\"username\" rules={[{ required: true, message: '用户名不能为空!' }]}>\r\n                            <Input prefix={<UserOutlined />} placeholder=\"请输入用户名\" />\r\n                        </Form.Item>\r\n                        <Form.Item name=\"password\" rules={[{required: true, message: '密码不能为空!'}]}>\r\n                            <Input.Password prefix={<LockOutlined />} placeholder=\"请输入密码\" />\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n                                <Checkbox>记住我</Checkbox>\r\n                            </Form.Item>\r\n                            {/* <a className=\"login-form-forgot\" href=\"\" style={{float: 'right'}}>忘记密码</a> */}\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Button type=\"primary\" htmlType=\"submit\" style={{width: '100%'}}>登录</Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n                </Modal>\r\n                <Modal title=\"注册\" visible={isRegisterModalVisible} destroyOnClose onCancel={closeRegisterModal} footer={[\r\n                    <Button key=\"register\" type=\"primary\" style={{float: 'left'}} onClick={showLoginModal}>登录</Button>,\r\n                    <Button key=\"cancel\" onClick={closeRegisterModal}>取消</Button>,\r\n                ]}>\r\n                    <Form onFinish={register}>\r\n                        <div ref={alert2} style={{backgroundColor: '#ffccc7', width: '100%', padding: '8px 15px', marginBottom: '10px', display: 'none'}}></div>\r\n                        <Form.Item name=\"username\" label=\"用户名\" rules={[{ required: true, message: '用户名不能为空!'}]}>\r\n                            <Input placeholder=\"请输入用户名\" />\r\n                        </Form.Item>\r\n                        <Form.Item name=\"password\" label=\"密码\" rules={[{required: true, message: '密码不能为空!'}]}>\r\n                            <Input.Password placeholder=\"请输入密码\" />\r\n                        </Form.Item>\r\n                        <Form.Item name=\"confirm\" label=\"确认密码\" dependencies={['password']} rules={[\r\n                            {required: true, message: '密码不能为空!'},\r\n                            ({ getFieldValue }) => ({\r\n                                validator(_, value) {\r\n                                    if (!value || getFieldValue('password') === value) {\r\n                                        return Promise.resolve();\r\n                                    }\r\n                                    return Promise.reject(new Error('密码不一致!'));\r\n                                },\r\n                            })\r\n                        ]}>\r\n                            <Input.Password placeholder=\"请再次输入密码\" />\r\n                        </Form.Item>\r\n                        <Form.Item name=\"nickname\" label=\"昵称\" rules={[{required: true, message: '昵称不能为空!'}]}>\r\n                            <Input placeholder=\"请输入昵称\" />\r\n                        </Form.Item>\r\n                        <Form.Item>\r\n                            <Button type=\"primary\" htmlType=\"submit\" style={{width: '100%'}}>注册</Button>\r\n                        </Form.Item>\r\n                    </Form>\r\n                </Modal>\r\n            </div>\r\n        </Header>\r\n    );\r\n}\r\n\r\nexport default observer(withRouter(MyHeader));"]},"metadata":{},"sourceType":"module"}